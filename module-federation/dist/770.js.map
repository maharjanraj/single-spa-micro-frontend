{"version":3,"file":"770.js","mappings":"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","sources":["webpack://module-federation/../../node_modules/.pnpm/dom-element-getter-helpers@1.1.1/node_modules/dom-element-getter-helpers/lib/dom-element-getter-helpers.js","webpack://module-federation/../../src/single-spa-react.js"],"sourcesContent":["function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nexport function chooseDomElementGetter(opts, props) {\n  var domElementGetter;\n\n  if (props.domElement) {\n    domElementGetter = function domElementGetter() {\n      return props.domElement;\n    };\n  } else if (props.domElementGetter) {\n    domElementGetter = props.domElementGetter;\n  } else if (opts.domElementGetter) {\n    domElementGetter = opts.domElementGetter;\n  } else {\n    domElementGetter = defaultDomElementGetter(props);\n  }\n\n  if (typeof domElementGetter !== \"function\") {\n    throw Error(\"single-spa's dom-element-getter-helpers was given an invalid domElementGetter for application or parcel '\".concat(props.name, \"'. Expected a function, received \").concat(_typeof(domElementGetter)));\n  }\n\n  return function () {\n    var domElement = domElementGetter(props);\n\n    if (!(domElement instanceof HTMLElement)) {\n      throw Error(\"single-spa's dom-element-getter-helpers: domElementGetter returned an invalid dom element for application or parcel '\".concat(props.name, \"'. Expected HTMLElement, received \").concat(_typeof(domElement)));\n    }\n\n    return domElement;\n  };\n}\n\nfunction defaultDomElementGetter(props) {\n  var appName = props.appName || props.name;\n\n  if (!appName) {\n    throw Error(\"single-spa's dom-element-getter-helpers was not given an application name as a prop, so it can't make a unique dom element container for the react application\");\n  }\n\n  var htmlId = \"single-spa-application:\".concat(appName);\n  return function defaultDomEl() {\n    var domElement = document.getElementById(htmlId);\n\n    if (!domElement) {\n      domElement = document.createElement(\"div\");\n      domElement.id = htmlId;\n      document.body.appendChild(domElement);\n    }\n\n    return domElement;\n  };\n}\n","/* We don't import parcel.component.js from this file intentionally. See comment\n * in that file for why\n */\n\nimport { chooseDomElementGetter } from \"dom-element-getter-helpers\";\n\n// React context that gives any react component the single-spa props\nexport let SingleSpaContext = null;\n\n// This try/catch exists mostly to prevent rollup from thinking that SingleSpaContext\n// is null and then doing optimizations in parcel.js that cause bugs.\n// See https://github.com/single-spa/single-spa-react/issues/105\n\ntry {\n  // single-spa-react is usable as a global script, as a systemjs module, and other\n  // situations where require() is unavailable. This is why we require the user to\n  // pass in opts.React and opts.ReactDOM - to avoid the mess of \"how do i properly load react\".\n  // However, in situations where require() is available, we can use it this way to create\n  // the react context. The try/catch defensiveness keeps single-spa-react working in\n  // as many situations as possible.\n  SingleSpaContext = require(\"react\").createContext();\n} catch {\n  // ignore\n}\n\nconst defaultOpts = {\n  // required opts\n  React: null,\n  ReactDOM: null,\n\n  // required - one or the other\n  rootComponent: null,\n  loadRootComponent: null,\n\n  // optional opts\n  renderType: null,\n  errorBoundary: null,\n  errorBoundaryClass: null,\n  domElementGetter: null,\n  parcelCanUpdate: true, // by default, allow parcels created with single-spa-react to be updated\n  suppressComponentDidCatchWarning: false,\n  domElements: {},\n  renderResults: {},\n  updateResolves: {},\n};\n\nexport default function singleSpaReact(userOpts) {\n  if (typeof userOpts !== \"object\") {\n    throw new Error(`single-spa-react requires a configuration object`);\n  }\n\n  const opts = {\n    ...defaultOpts,\n    ...userOpts,\n  };\n\n  if (!opts.React) {\n    throw new Error(`single-spa-react must be passed opts.React`);\n  }\n\n  if (!opts.ReactDOM) {\n    throw new Error(`single-spa-react must be passed opts.ReactDOM`);\n  }\n\n  if (!opts.rootComponent && !opts.loadRootComponent) {\n    throw new Error(\n      `single-spa-react must be passed opts.rootComponent or opts.loadRootComponent`\n    );\n  }\n\n  if (opts.errorBoundary && typeof opts.errorBoundary !== \"function\") {\n    throw Error(\n      `The errorBoundary opt for single-spa-react must either be omitted or be a function that returns React elements`\n    );\n  }\n\n  if (!SingleSpaContext && opts.React.createContext) {\n    SingleSpaContext = opts.React.createContext();\n  }\n\n  opts.SingleSpaRoot = createSingleSpaRoot(opts);\n\n  const lifecycles = {\n    bootstrap: bootstrap.bind(null, opts),\n    mount: mount.bind(null, opts),\n    unmount: unmount.bind(null, opts),\n  };\n\n  if (opts.parcelCanUpdate) {\n    lifecycles.update = update.bind(null, opts);\n  }\n\n  return lifecycles;\n}\n\nfunction bootstrap(opts, props) {\n  if (opts.rootComponent) {\n    // This is a class or stateless function component\n    return Promise.resolve();\n  } else {\n    // They passed a promise that resolves with the react component. Wait for it to resolve before mounting\n    return opts.loadRootComponent(props).then((resolvedComponent) => {\n      opts.rootComponent = resolvedComponent;\n    });\n  }\n}\n\nfunction mount(opts, props) {\n  return new Promise((resolve, reject) => {\n    if (\n      !opts.suppressComponentDidCatchWarning &&\n      atLeastReact16(opts.React) &&\n      !opts.errorBoundary\n    ) {\n      if (!opts.rootComponent.prototype) {\n        console.warn(\n          `single-spa-react: ${\n            props.name || props.appName || props.childAppName\n          }'s rootComponent does not implement an error boundary.  If using a functional component, consider providing an opts.errorBoundary to singleSpaReact(opts).`\n        );\n      } else if (!opts.rootComponent.prototype.componentDidCatch) {\n        console.warn(\n          `single-spa-react: ${\n            props.name || props.appName || props.childAppName\n          }'s rootComponent should implement componentDidCatch to avoid accidentally unmounting the entire single-spa application.`\n        );\n      }\n    }\n\n    const whenMounted = function () {\n      resolve(this);\n    };\n\n    const elementToRender = getElementToRender(opts, props, whenMounted);\n    const domElement = chooseDomElementGetter(opts, props)();\n    const renderResult = reactDomRender({\n      elementToRender,\n      domElement,\n      opts,\n    });\n    opts.domElements[props.name] = domElement;\n    opts.renderResults[props.name] = renderResult;\n  });\n}\n\nfunction unmount(opts, props) {\n  return new Promise((resolve) => {\n    opts.unmountFinished = resolve;\n\n    const root = opts.renderResults[props.name];\n\n    if (root && root.unmount) {\n      // React >= 18\n      const unmountResult = root.unmount();\n    } else {\n      // React < 18\n      opts.ReactDOM.unmountComponentAtNode(opts.domElements[props.name]);\n    }\n    delete opts.domElements[props.name];\n    delete opts.renderResults[props.name];\n  });\n}\n\nfunction update(opts, props) {\n  return new Promise((resolve) => {\n    if (!opts.updateResolves[props.name]) {\n      opts.updateResolves[props.name] = [];\n    }\n\n    opts.updateResolves[props.name].push(resolve);\n\n    const elementToRender = getElementToRender(opts, props, null);\n    const renderRoot = opts.renderResults[props.name];\n    if (renderRoot && renderRoot.render) {\n      // React 18 with ReactDOM.createRoot()\n      renderRoot.render(elementToRender);\n    } else {\n      // React 16 / 17 with ReactDOM.render()\n      const domElement = chooseDomElementGetter(opts, props)();\n\n      // This is the old way to update a react application - just call render() again\n      opts.ReactDOM.render(elementToRender, domElement);\n    }\n  });\n}\n\nfunction atLeastReact16(React) {\n  if (\n    React &&\n    typeof React.version === \"string\" &&\n    React.version.indexOf(\".\") >= 0\n  ) {\n    const majorVersionString = React.version.slice(\n      0,\n      React.version.indexOf(\".\")\n    );\n    try {\n      return Number(majorVersionString) >= 16;\n    } catch (err) {\n      return false;\n    }\n  } else {\n    return false;\n  }\n}\n\nfunction reactDomRender({ opts, elementToRender, domElement }) {\n  const renderType =\n    typeof opts.renderType === \"function\" ? opts.renderType() : opts.renderType;\n  if (\n    [\n      \"createRoot\",\n      \"unstable_createRoot\",\n      \"createBlockingRoot\",\n      \"unstable_createBlockingRoot\",\n    ].indexOf(renderType) >= 0\n  ) {\n    const root = opts.ReactDOM[renderType](domElement);\n    root.render(elementToRender);\n    return root;\n  }\n\n  if (renderType === \"hydrate\") {\n    opts.ReactDOM.hydrate(elementToRender, domElement);\n  } else {\n    // default to this if 'renderType' is null or doesn't match the other options\n    opts.ReactDOM.render(elementToRender, domElement);\n  }\n\n  // The reactDomRender function should return a react root, but ReactDOM.hydrate() and ReactDOM.render()\n  // do not return a react root. So instead, we return null which indicates that there is no react root\n  // that can be used for updates or unmounting\n  return null;\n}\n\nfunction getElementToRender(opts, props, mountFinished) {\n  const rootComponentElement = opts.React.createElement(\n    opts.rootComponent,\n    props\n  );\n\n  let elementToRender = SingleSpaContext\n    ? opts.React.createElement(\n        SingleSpaContext.Provider,\n        { value: props },\n        rootComponentElement\n      )\n    : rootComponentElement;\n\n  if (\n    opts.errorBoundary ||\n    props.errorBoundary ||\n    opts.errorBoundaryClass ||\n    props.errorBoundaryClass\n  ) {\n    opts.errorBoundaryClass =\n      opts.errorBoundaryClass ||\n      props.errorBoundaryClass ||\n      createErrorBoundary(opts, props);\n    elementToRender = opts.React.createElement(\n      opts.errorBoundaryClass,\n      props,\n      elementToRender\n    );\n  }\n\n  // https://github.com/single-spa/single-spa-react/issues/112\n  elementToRender = opts.React.createElement(\n    opts.SingleSpaRoot,\n    {\n      ...props,\n      mountFinished,\n      updateFinished() {\n        if (opts.updateResolves[props.name]) {\n          opts.updateResolves[props.name].forEach((r) => r());\n          delete opts.updateResolves[props.name];\n        }\n      },\n      unmountFinished() {\n        setTimeout(opts.unmountFinished);\n      },\n    },\n    elementToRender\n  );\n\n  return elementToRender;\n}\n\nfunction createErrorBoundary(opts, props) {\n  // Avoiding babel output for class syntax and super()\n  // to avoid bloat\n  function SingleSpaReactErrorBoundary(props) {\n    // super\n    opts.React.Component.apply(this, arguments);\n\n    this.state = {\n      caughtError: null,\n      caughtErrorInfo: null,\n    };\n\n    SingleSpaReactErrorBoundary.displayName = `SingleSpaReactErrorBoundary(${props.name})`;\n  }\n\n  SingleSpaReactErrorBoundary.prototype = Object.create(\n    opts.React.Component.prototype\n  );\n\n  SingleSpaReactErrorBoundary.prototype.render = function () {\n    if (this.state.caughtError) {\n      const errorBoundary = opts.errorBoundary || props.errorBoundary;\n\n      return errorBoundary(\n        this.state.caughtError,\n        this.state.caughtErrorInfo,\n        this.props\n      );\n    } else {\n      return this.props.children;\n    }\n  };\n\n  SingleSpaReactErrorBoundary.prototype.componentDidCatch = function (\n    err,\n    info\n  ) {\n    this.setState({\n      caughtError: err,\n      caughtErrorInfo: info,\n    });\n  };\n\n  return SingleSpaReactErrorBoundary;\n}\n\nfunction createSingleSpaRoot(opts) {\n  // This is a class component, since we need a mount hook and single-spa-react supports React@15 (no useEffect available)\n  function SingleSpaRoot(_props) {\n    SingleSpaRoot.displayName = `SingleSpaRoot(${_props.name})`;\n  }\n\n  SingleSpaRoot.prototype = Object.create(opts.React.Component.prototype);\n  SingleSpaRoot.prototype.componentDidMount = function () {\n    setTimeout(this.props.mountFinished);\n  };\n  SingleSpaRoot.prototype.componentWillUnmount = function () {\n    setTimeout(this.props.unmountFinished);\n  };\n  SingleSpaRoot.prototype.render = function () {\n    // componentDidUpdate doesn't seem to be called during root.render() for updates\n    setTimeout(this.props.updateFinished);\n\n    return this.props.children;\n  };\n\n  return SingleSpaRoot;\n}\n"],"names":["r","e","Symbol","iterator","constructor","prototype","a","t","n","domElement","domElementGetter","appName","name","Error","concat","document","getElementById","createElement","id","body","appendChild","HTMLElement","i","require","createContext","c","React","ReactDOM","rootComponent","loadRootComponent","renderType","errorBoundary","errorBoundaryClass","parcelCanUpdate","suppressComponentDidCatchWarning","domElements","renderResults","updateResolves","u","o","SingleSpaRoot","displayName","Object","create","Component","componentDidMount","setTimeout","props","mountFinished","componentWillUnmount","unmountFinished","render","updateFinished","children","bootstrap","p","bind","mount","s","unmount","l","update","m","Promise","resolve","then","version","indexOf","slice","Number","componentDidCatch","console","warn","childAppName","d","opts","elementToRender","hydrate","unmountComponentAtNode","push","Provider","value","apply","arguments","state","caughtError","caughtErrorInfo","setState","forEach","SingleSpaContext","default"],"sourceRoot":""}